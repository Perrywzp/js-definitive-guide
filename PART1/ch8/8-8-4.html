<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>记忆</title>
</head>

<body>

</body>
<script>
    function memorize(f) {
        var cache = {};
        return function() {
            var key = arguments.length + Array.prototype.join.call(arguments, ",");
            if (key in cache) return cache[key];
            else return cache[key] = f.apply(this, arguments);
        }
    }

    function gcd(a, b) {
        var t;
        if (a < b) t = b, b = a, a = t;
        while (b != 0) t = b, b = a % b, a = t;
        return a;
    }

    var gcdmemo = memorize(gcd);
    document.write(gcdmemo(85, 187)+"<br/>");

    var factorial = memorize(function(n) {
        return (n <= 1) ? 1 : n * factorial(n - 1);
    })

    document.write(factorial(5));
</script>

</html>
